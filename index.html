<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>å°çº¢ä¹¦å¿ƒç†å­¦å†…å®¹ç”Ÿæˆå™¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #fdf6ec;
      --bg-alt: #fff0f5;
      --card-bg: #ffffff;
      --primary: #e8a0a0;
      --primary-strong: #f28b82;
      --primary-soft: rgba(232, 160, 160, 0.16);
      --accent-apricot: #f5c9a0;
      --accent-rose: #f7c6c7;
      --text-main: #5c3d2e;
      --text-sub: #8c6b5b;
      --border: rgba(238, 205, 186, 0.9);
      --radius-lg: 18px;
      --shadow-soft: 0 16px 45px rgba(209, 160, 132, 0.22);
      --font-sans: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "PingFang SC", "Microsoft YaHei", sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: var(--font-sans);
      background:
        radial-gradient(circle at top left, rgba(255, 244, 236, 0.98), transparent 60%),
        radial-gradient(circle at bottom right, rgba(255, 230, 236, 0.9), transparent 55%),
        linear-gradient(135deg, #fdf6ec 0%, #fff0f5 55%, #ffe9dd 100%);
      color: var(--text-main);
      display: flex;
      align-items: stretch;
      justify-content: center;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }

    .app-shell {
      width: 100%;
      max-width: 1180px;
      padding: 28px 20px 40px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .app-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
    }

    .app-title-block {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .app-title-row {
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .logo-dot {
      width: 14px;
      height: 14px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #fff5f6, #e8a0a0);
      box-shadow: 0 0 0 4px rgba(248, 213, 213, 0.9), 0 0 18px rgba(232, 160, 160, 0.8);
    }

    .title-main {
      font-size: 20px;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: none;
      color: #5c3d2e;
    }

    .title-sub {
      font-size: 13px;
      color: var(--text-sub);
    }

    .app-badge-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      font-size: 11px;
    }

    .badge-pill {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(241, 200, 176, 0.9);
      background: linear-gradient(135deg, #fff9f4, #ffe9df);
      color: #8c6b5b;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .badge-pill span {
      font-size: 11px;
      letter-spacing: 0.03em;
      color: #b07a60;
    }

    .badge-pill-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #ffe4e6, #e8a0a0);
    }

    .app-actions {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .app-actions-note {
      font-size: 11px;
      color: #b07a60;
    }

    .app-layout {
      display: grid;
      grid-template-columns: minmax(0, 1.05fr) minmax(0, 1.35fr);
      gap: 18px;
      align-items: flex-start;
    }

    @media (max-width: 900px) {
      .app-shell {
        padding: 18px 14px 26px;
      }

      .app-header {
        flex-direction: column;
        align-items: flex-start;
      }

      .app-layout {
        grid-template-columns: minmax(0, 1fr);
      }

      .app-actions {
        justify-content: flex-start;
      }
    }

    .panel {
      background: var(--card-bg);
      border-radius: 22px;
      padding: 20px 20px 18px;
      box-shadow: 0 14px 40px rgba(221, 178, 153, 0.35);
      border: 1px solid rgba(241, 210, 190, 0.9);
      position: relative;
      overflow: hidden;
    }

    .panel::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at top left, rgba(249, 217, 207, 0.6), transparent 55%),
        radial-gradient(circle at bottom right, rgba(252, 228, 236, 0.7), transparent 50%);
      opacity: 0.4;
      pointer-events: none;
    }

    .panel-inner {
      position: relative;
      z-index: 1;
    }

    .panel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 14px;
      gap: 8px;
    }

    .title {
      font-size: 17px;
      font-weight: 600;
      letter-spacing: 0.03em;
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--text-main);
    }

    .title-pill {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: #fff7f2;
      color: #b36b5e;
      font-weight: 500;
      border: 1px solid rgba(241, 204, 187, 0.9);
    }

    .subtitle {
      font-size: 12px;
      color: var(--text-sub);
      margin-bottom: 14px;
      line-height: 1.7;
    }

    .form-group {
      margin-bottom: 18px;
    }

    label {
      font-size: 12px;
      color: var(--text-sub);
      margin-bottom: 6px;
      display: block;
    }

    .keyword-input {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    input[type="text"] {
      flex: 1;
      padding: 9px 13px;
      border-radius: 999px;
      border: 1px solid rgba(238, 205, 186, 0.95);
      font-size: 13px;
      outline: none;
      transition: all 0.16s ease;
      background: #fffaf5;
      color: var(--text-main);
    }

    input[type="text"]:focus {
      border-color: rgba(232, 160, 160, 0.9);
      box-shadow: 0 0 0 1px rgba(232, 160, 160, 0.4);
      background: #ffffff;
    }

    input::placeholder {
      color: #c2a294;
    }

    button {
      border: none;
      border-radius: 999px;
      background:
        linear-gradient(135deg, #f7c6c7 0%, #e8a0a0 40%, #f5c9a0 100%);
      background-size: 180% 180%;
      color: #5c3d2e;
      padding: 9px 18px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 10px 26px rgba(232, 160, 160, 0.5);
      transition: transform 0.14s ease, box-shadow 0.14s ease, filter 0.14s ease, background-position 0.5s ease;
      white-space: nowrap;
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 34px rgba(219, 150, 135, 0.55);
      filter: brightness(1.03);
      background-position: 100% 0;
    }

    button:active {
      transform: translateY(0);
      box-shadow: 0 8px 18px rgba(202, 140, 125, 0.5);
    }

    button:disabled {
      opacity: 0.65;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
      filter: grayscale(0.1);
    }

    .hint {
      font-size: 11px;
      color: #b07a60;
      display: flex;
      flex-wrap: wrap;
      gap: 6px 12px;
      align-items: center;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
    }

    .chip {
      padding: 4px 10px;
      border-radius: 999px;
      background: #fff8f3;
      font-size: 11px;
      color: #8c6b5b;
      cursor: pointer;
      border: 1px solid rgba(238, 205, 186, 0.9);
      transition: all 0.12s ease;
      user-select: none;
    }

    .chip:hover {
      background: #ffefe5;
      border-color: rgba(232, 160, 160, 0.9);
    }

    .chip.primary {
      background: linear-gradient(135deg, #ffe1dd, #f7c6c7);
      color: #5c3d2e;
      border-color: rgba(232, 160, 160, 1);
      box-shadow: 0 0 0 1px rgba(232, 160, 160, 0.4);
    }

    .meta-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      color: #b07a60;
      margin-top: 6px;
    }

    .badge-soft {
      padding: 3px 10px;
      border-radius: 999px;
      background: #fff8f3;
      color: #b07a60;
      font-size: 11px;
      border: 1px solid rgba(238, 205, 186, 0.9);
    }

    .badge-soft strong {
      color: #8c5c45;
    }

    .results-panel {
      position: relative;
    }

    .results-header-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }

    .results-meta {
      font-size: 11px;
      color: #b07a60;
    }

    .results-meta strong {
      color: #8c5c45;
    }

    .actions-row {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .ghost-btn {
      border-radius: 999px;
      border: 1px solid rgba(238, 205, 186, 0.95);
      background: #fff8f3;
      color: #8c6b5b;
      font-size: 11px;
      padding: 6px 10px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      transition: all 0.12s ease;
    }

    .ghost-btn:hover {
      background: #ffefe5;
      border-color: rgba(232, 160, 160, 0.9);
    }

    .posts-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-height: 540px;
      overflow: auto;
      padding-right: 2px;
    }

    .post-card {
      border-radius: var(--radius-lg);
      padding: 14px 14px 12px;
      background:
        linear-gradient(135deg, #fffdf9, #fff6f2);
      border: 1px solid rgba(241, 210, 190, 0.9);
      position: relative;
      box-shadow: 0 12px 30px rgba(221, 178, 153, 0.55);
    }

    .post-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(247, 198, 199, 0.3), transparent 45%, rgba(245, 201, 160, 0.25));
      opacity: 0.85;
      mix-blend-mode: soft-light;
      pointer-events: none;
    }

    .post-card > * {
      position: relative;
      z-index: 1;
    }

    .post-index {
      position: absolute;
      top: 10px;
      right: 12px;
      font-size: 10px;
      color: #ae6b5a;
      background: #fff5f0;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(232, 160, 160, 0.8);
    }

    .post-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 8px;
      line-height: 1.5;
      color: #5c3d2e;
    }

    .post-body {
      font-size: 12px;
      color: #7a5542;
      white-space: pre-line;
      line-height: 1.7;
      margin-bottom: 8px;
    }

    .post-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 4px;
    }

    .tag {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: #fff0f5;
      color: #ae6b5a;
      border: 1px solid rgba(232, 160, 160, 0.8);
    }

    .post-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 10px;
      color: #b07a60;
      margin-top: 2px;
    }

    .copy-btn {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(238, 205, 186, 0.95);
      background: #fff8f3;
      color: #8c6b5b;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      transition: all 0.12s ease;
    }

    .copy-btn:hover {
      background: #ffefe5;
      border-color: rgba(232, 160, 160, 0.9);
    }

    .empty-state {
      border-radius: 18px;
      background:
        linear-gradient(135deg, #fffdf9, #fff6f3);
      padding: 22px 18px 18px;
      text-align: left;
      color: #8c6b5b;
      font-size: 12px;
      border: 1px dashed rgba(238, 205, 186, 0.95);
    }

    .empty-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 6px;
      color: #5c3d2e;
    }

    .empty-list {
      padding-left: 18px;
      margin: 6px 0 8px;
      line-height: 1.6;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 11px;
      padding: 2px 7px;
      border-radius: 999px;
      background: #fff8f3;
      border: 1px dashed rgba(238, 205, 186, 0.95);
      color: #b07a60;
    }

    .pill-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #e8a0a0;
    }

    .toast {
      position: fixed;
      left: 50%;
      bottom: 26px;
      transform: translateX(-50%);
      background: #fff8f3;
      color: #5c3d2e;
      font-size: 12px;
      padding: 7px 13px;
      border-radius: 999px;
      box-shadow: 0 18px 40px rgba(221, 178, 153, 0.6);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.16s ease, transform 0.16s ease;
      z-index: 9999;
      display: flex;
      align-items: center;
      gap: 8px;
      border: 1px solid rgba(232, 160, 160, 0.9);
    }

    .toast.show {
      opacity: 1;
      transform: translate(-50%, -4px);
      pointer-events: auto;
    }

    .toast-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #ffe4e6, #e8a0a0);
      box-shadow: 0 0 10px rgba(232, 160, 160, 0.9);
    }

    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: #e5e7eb;
      border-radius: 999px;
    }

    .count-select {
      border-radius: 999px;
      border: 1px solid rgba(238, 205, 186, 0.95);
      background: #fff8f3;
      font-size: 11px;
      padding: 4px 9px;
      color: #8c6b5b;
      outline: none;
    }

    .count-select:focus {
      border-color: rgba(232, 160, 160, 0.9);
      box-shadow: 0 0 0 1px rgba(232, 160, 160, 0.4);
      background: #ffffff;
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <div class="app-title-block">
        <div class="app-title-row">
          <div class="logo-dot"></div>
          <div class="title-main">é±¼ä»”çš„åˆ›ä½œçµæ„Ÿåº“</div>
        </div>
        <div class="title-sub">
          å°çº¢ä¹¦å¿ƒç†å­¦å†…å®¹ç”Ÿæˆå™¨ Â· ä¸ºåˆ›ä½œè€…å‡†å¤‡çš„é«˜è´¨é‡é€‰é¢˜ä¸æ–‡æ¡ˆçµæ„Ÿå·¥å…·
        </div>
        <div class="app-badge-row">
          <div class="badge-pill">
            <div class="badge-pill-dot"></div>
            <span>Story Â· Empathy Â· Practice</span>
          </div>
        </div>
      </div>
      <div class="app-actions">
        <div class="app-actions-note">
          å•é¡µåº”ç”¨ Â· ç›´æ¥éƒ¨ç½²åˆ° Vercel å³å¯åˆ†äº«é“¾æ¥
        </div>
      </div>
    </header>

    <main class="app-layout">
      <section class="panel">
        <div class="panel-inner">
          <div class="panel-header">
            <div class="title">
              å†™ä½œè¾“å…¥
              <span class="title-pill">å¿ƒç†å­¦å‘å°çº¢ä¹¦ç¬”è®°</span>
            </div>
          </div>
          <p class="subtitle">
            è¾“å…¥ä¸€ä¸ªä½ æƒ³æ·±æŒ–çš„å¿ƒç†å­¦å…³é”®è¯ï¼Œæˆ‘ä¼šå¸®ä½ æ‹†æˆå¤šæ¡
            <strong>é«˜å…±é¸£ + æœ‰æ•…äº‹ + æœ‰å®ç”¨å»ºè®®</strong> çš„ç¬”è®°è‰ç¨¿ã€‚
          </p>

          <div class="form-group">
            <label for="keyword">
              å…³é”®è¯ï¼ˆå¿…å¡«ï¼‰
            </label>
            <div class="keyword-input">
              <input
                id="keyword"
                type="text"
                spellcheck="false"
                placeholder="ä¾‹å¦‚ï¼šåŸç”Ÿå®¶åº­ / å†…è€— / è¾¹ç•Œæ„Ÿ / æƒ…ç»ªç¨³å®š / è‡ªæˆ‘ä»·å€¼æ„Ÿ"
              />
              <button id="generateBtn">
                <span>ç”Ÿæˆæ–‡æ¡ˆ</span>
              </button>
            </div>
            <div class="hint">
              <span>ä¹Ÿå¯ä»¥ç›´æ¥ç‚¹ä¸‹é¢è¿™äº›ï¼š</span>
              <div class="chip-row" id="keywordChips">
                <span class="chip primary">åŸç”Ÿå®¶åº­</span>
                <span class="chip">å†…è€—</span>
                <span class="chip">è¾¹ç•Œæ„Ÿ</span>
                <span class="chip">æƒ…ç»ªç¨³å®š</span>
                <span class="chip">äº²å¯†å…³ç³»</span>
                <span class="chip">è‡ªæˆ‘ä»·å€¼æ„Ÿ</span>
              </div>
            </div>
            <div class="meta-row">
              <div class="badge-soft">
                é»˜è®¤ç”Ÿæˆ <strong id="countLabel">5</strong> æ¡å†…å®¹
              </div>
              <div style="display:flex;align-items:center;gap:6px;">
                <span style="font-size:11px;color:#6b7280;">æ¯æ¬¡ç”Ÿæˆ</span>
                <select id="countSelect" class="count-select">
                  <option value="3">3 æ¡</option>
                  <option value="5" selected>5 æ¡</option>
                  <option value="8">8 æ¡</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label>é£æ ¼åå¥½ï¼ˆå¯é€‰ï¼‰</label>
            <div class="chip-row" id="styleChips">
              <span class="chip primary" data-style="mix">æ•…äº‹ + å…±é¸£ + å¹²è´§ï¼ˆæ¨èï¼‰</span>
              <span class="chip" data-style="story">æ•…äº‹æ„Ÿå¼º</span>
              <span class="chip" data-style="practical">å·¥å…·&å¹²è´§</span>
              <span class="chip" data-style="emotional">å…±é¸£&æƒ…ç»ªä»·å€¼</span>
            </div>
          </div>

          <div class="form-group">
            <label>é€‚ç”¨åœºæ™¯æç¤ºï¼ˆå¯é€‰ï¼Œä¸å½±å“ç”Ÿæˆï¼Œåªç»™ä½ ç”¨ï¼‰</label>
            <div class="chip-row">
              <span class="chip">æƒ³åšç³»åˆ—å†…å®¹</span>
              <span class="chip">æƒ³åšçˆ†æ¬¾å°é¢æ ‡é¢˜</span>
              <span class="chip">æƒ³åšç›´æ’­è¯é¢˜å¼•æµ</span>
              <span class="chip">æƒ³åšçŸ¥è¯†ç§‘æ™®</span>
            </div>
          </div>

          <p class="hint" style="margin-top:10px;">
            å°æç¤ºï¼šå¦‚æœè§‰å¾—ä¸å¤Ÿæ»¡æ„ï¼Œå¯ä»¥å¤šç‚¹å‡ æ¬¡ã€Œç”Ÿæˆæ–‡æ¡ˆã€ï¼Œä¼šéšæœºç»™ä½ ä¸åŒè§’åº¦çš„å†…å®¹çµæ„Ÿã€‚
          </p>
        </div>
      </section>

      <section class="panel results-panel">
        <div class="panel-inner">
          <div class="results-header-row">
            <div>
              <div class="title" style="font-size:15px;margin-bottom:2px;">
                ç”Ÿæˆç»“æœ
              </div>
              <div class="results-meta" id="resultsMeta">
                ç­‰ä½ è¾“å…¥å…³é”®è¯ âœï¸
              </div>
            </div>
            <div class="actions-row">
              <button class="ghost-btn" id="copyAllBtn">
                å¤åˆ¶å…¨éƒ¨
              </button>
            </div>
          </div>
          <div class="posts-list" id="postsList">
            <div class="empty-state">
              <div class="empty-title">
                æƒ³å¥½ä½ è¦è®²çš„é‚£ä¸ªå¿ƒç†å­¦å…³é”®è¯äº†å—ï¼Ÿ
              </div>
              <p>
                åœ¨å·¦ä¾§è¾“å…¥ä¸€ä¸ªä½ æƒ³åšçš„å°çº¢ä¹¦ä¸»é¢˜ï¼Œæ¯”å¦‚ã€ŒåŸç”Ÿå®¶åº­ã€ã€Œæƒ…ç»ªç¨³å®šã€ã€Œè‡ªæˆ‘ä»·å€¼æ„Ÿã€ï¼Œ
                ç„¶åç‚¹ä¸€ä¸‹<strong>ç”Ÿæˆæ–‡æ¡ˆ</strong>ï¼Œè¿™è¾¹ä¼šç«‹åˆ»å¸®ä½ å‡†å¤‡å¥½å¤šæ¡å¯ç›´æ¥å‘å¸ƒçš„å†…å®¹è‰ç¨¿ã€‚
              </p>
              <ul class="empty-list">
                <li>æ¯æ¡éƒ½ä¼šå¸®ä½ å†™å¥½ï¼šæ ‡é¢˜ + æ­£æ–‡ç»“æ„ + è¯é¢˜æ ‡ç­¾</li>
                <li>é£æ ¼éµå¾ªå°çº¢ä¹¦çˆ†æ¬¾ç‰¹ç‚¹ï¼šå¼€å¤´æœ‰å¯¹è¯æ„Ÿï¼Œä¸­é—´æœ‰æ•…äº‹ï¼Œæœ‰å®ç”¨å»ºè®®ï¼Œç»“å°¾æœ‰å…±é¸£å’Œè¡ŒåŠ¨å·å¬</li>
                <li>ä¸æ»¡æ„å°±å¤šç”Ÿæˆå‡ æ¬¡ï¼ŒæŒ‘ä½ æœ€æœ‰æ„Ÿè§‰çš„é‚£å‡ æ¡å¾®è°ƒåå‘å‡ºå»å°±è¡Œ</li>
              </ul>
              <div style="display:flex;gap:8px;flex-wrap:wrap;">
                <span class="pill">
                  <span class="pill-dot"></span>
                  é«˜å…±é¸£
                </span>
                <span class="pill">
                  <span class="pill-dot" style="background:#38bdf8;"></span>
                  æœ‰æ•…äº‹
                </span>
                <span class="pill">
                  <span class="pill-dot" style="background:#22c55e;"></span>
                  æœ‰å¹²è´§
                </span>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div class="toast" id="toast">
    <span class="toast-dot"></span>
    <span id="toastText">å·²å¤åˆ¶åˆ°å‰ªè´´æ¿</span>
  </div>

  <script>
    const keywordInput = document.getElementById('keyword');
    const generateBtn = document.getElementById('generateBtn');
    const postsList = document.getElementById('postsList');
    const resultsMeta = document.getElementById('resultsMeta');
    const keywordChips = document.getElementById('keywordChips');
    const styleChips = document.getElementById('styleChips');
    const countSelect = document.getElementById('countSelect');
    const countLabel = document.getElementById('countLabel');
    const copyAllBtn = document.getElementById('copyAllBtn');
    const toast = document.getElementById('toast');
    const toastText = document.getElementById('toastText');

    function showToast(text) {
      toastText.textContent = text;
      toast.classList.add('show');
      clearTimeout(showToast._timer);
      showToast._timer = setTimeout(() => {
        toast.classList.remove('show');
      }, 2000);
    }

    function randomPick(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function getSelectedStyle() {
      const active = styleChips.querySelector('.chip.primary');
      return active ? active.dataset.style || 'mix' : 'mix';
    }

    function buildTitle(keyword, style) {
      const templates = {
        mix: [
          `çœ‹æ‡‚ã€Œ${keyword}ã€ï¼Œä½ ä¼šçªç„¶ç†è§£å¾ˆå¤šäº‹`,
          `ä¸ºä»€ä¹ˆæ€»æ˜¯è¢«ã€Œ${keyword}ã€å›°ä½ï¼Ÿå¯èƒ½ä¸æ˜¯ä½ çš„é—®é¢˜`,
          `å½“æˆ‘å¼€å§‹æ­£è§†è‡ªå·±çš„ã€Œ${keyword}ã€ï¼Œäººç”ŸçœŸçš„ä¸ä¸€æ ·äº†`,
          `æˆå¹´åæ‰€æœ‰çš„å¡ç‚¹ï¼Œå‡ ä¹éƒ½å’Œã€Œ${keyword}ã€æœ‰å…³`,
          `ææ‡‚ã€Œ${keyword}ã€ï¼Œä½ å°±ä¸ä¼šé‚£ä¹ˆè¾›è‹¦äº†`
        ],
        story: [
          `ä¸€ä¸ªå…³äºã€Œ${keyword}ã€çš„çœŸå®æ•…äº‹ï¼šå¥¹ç»ˆäºå­¦ä¼šä¸ºè‡ªå·±æ´»`,
          `ä»å´©æºƒåˆ°å’Œè§£ï¼Œå¥¹èµ°å‡ºäº†ã€Œ${keyword}ã€çš„ç‰¢ç¬¼`,
          `å¦‚æœä¸æ˜¯é‚£æ¬¡å´©æºƒï¼Œå¥¹å¯èƒ½ä¸€è¾ˆå­éƒ½æ²¡æ„è¯†åˆ°è‡ªå·±çš„ã€Œ${keyword}ã€é—®é¢˜`,
          `åŸæ¥ä¸€ç›´å›°ä½å¥¹çš„ï¼Œä¸æ˜¯èƒ½åŠ›ï¼Œè€Œæ˜¯å¯¹ã€Œ${keyword}ã€çš„è¯¯è§£`,
          `å½“å¥¹è¯´å‡ºã€Œæˆ‘ä¸è¦å†è¢«ã€${keyword}ã€ç»‘æ¶äº†ã€é‚£ä¸€åˆ»ï¼Œæˆ‘å“­äº†`
        ],
        practical: [
          `å¦‚ä½•æ¸©æŸ”åœ°ä¿®å¤è‡ªå·±çš„ã€Œ${keyword}ã€ï¼Ÿè¿™5ä¸ªç»ƒä¹ å€¼å¾—æ¯å¤©åš`,
          `å­¦ä¼šè¿™3ä¸ªæ­¥éª¤ï¼Œä½ ä¼šå‘ç°ã€Œ${keyword}ã€å¯ä»¥è¢«ä¸€ç‚¹ç‚¹ä¿®å›æ¥`,
          `å…³äºã€Œ${keyword}ã€ï¼Œè¿™æ˜¯æˆ‘å¿ƒç†å’¨è¯¢å¸ˆæœ‹å‹æœ€å¸¸ç»™çš„å»ºè®®`,
          `ç”¨å¿ƒç†å­¦çš„æ–¹æ³•ï¼Œç»™è‡ªå·±çš„ã€Œ${keyword}ã€åšä¸€æ¬¡ç³»ç»Ÿä½“æ£€`,
          `æƒ³è·³å‡ºã€Œ${keyword}ã€çš„å‘ï¼Ÿå…ˆä»è¿™4ä¸ªå°åŠ¨ä½œå¼€å§‹`
        ],
        emotional: [
          `é‚£äº›æ²¡è¢«å¥½å¥½çœ‹è§çš„ã€Œ${keyword}ã€ï¼Œåæ¥éƒ½å˜æˆäº†æˆå¹´åçš„å¿ƒäº‹`,
          `ä½ çœ‹èµ·æ¥å¾ˆæ‡‚äº‹ï¼Œå…¶å®æ˜¯ã€Œ${keyword}ã€ç§¯ç´¯å¤ªä¹…äº†`,
          `æ€»æ˜¯å¿ƒè½¯ã€æ€»æ˜¯å§”å±ˆï¼Œå…¶å®éƒ½æ˜¯ã€Œ${keyword}ã€åœ¨è¯´è¯`,
          `ä¸ºä»€ä¹ˆä½ é‚£ä¹ˆåŠªåŠ›ï¼Œè¿˜æ˜¯æ€»è§‰å¾—ä¸è¢«çˆ±ï¼Ÿç­”æ¡ˆè—åœ¨ä½ çš„ã€Œ${keyword}ã€é‡Œ`,
          `å¾ˆå¤šäººä»¥ä¸ºè‡ªå·±æ˜¯æ€§æ ¼é—®é¢˜ï¼Œå…¶å®æ˜¯ã€Œ${keyword}ã€å¤ªå—ä¼¤äº†`
        ]
      };
      const pool = templates[style] || templates.mix;
      return randomPick(pool);
    }

    function buildBody(keyword, style) {
      const openers = [
        `ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œ\næ˜æ˜å·²ç»é•¿å¤§äº†ï¼Œå¯æ˜¯é‡åˆ°æŸäº›åœºæ™¯æ—¶ï¼Œè¿˜æ˜¯ä¼šä¸‹æ„è¯†åœ°ã€Œåƒå°æ—¶å€™ä¸€æ ·ã€ååº”ï¼Ÿ`,
        `å¾ˆå¤šäººè·Ÿæˆ‘è¯´ï¼šã€Œæˆ‘çŸ¥é“é—®é¢˜å‡ºåœ¨ã€${keyword}ã€ï¼Œå¯æ˜¯æˆ‘å°±æ˜¯æ”¹ä¸åŠ¨ã€‚ã€\nå…¶å®ä½ ä¸æ˜¯ä¸è¡Œï¼Œåªæ˜¯æ²¡äººæ•™ä½ å¯ä»¥æ€ä¹ˆåšã€‚`,
        `å¦‚æœä½ ä¹Ÿåœ¨è¢«ã€Œ${keyword}ã€åå¤æ‹‰æ‰¯ï¼Œè¯·å…ˆå…è®¸è‡ªå·±åœä¸‹æ¥ï¼Œè®¤çœŸçœ‹çœ‹è¿™äº›æ„Ÿå—èƒŒååˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚`,
        `æˆ‘ä»¬è¿™ä¸€ä»£äººï¼Œå¾ˆå°‘åœ¨å­¦æ ¡é‡Œå­¦è¿‡æ€ä¹ˆå¥½å¥½é¢å¯¹ã€Œ${keyword}ã€ã€‚\nä½†èµ°è¿›ç¤¾ä¼šæ‰å‘ç°ï¼Œå®ƒå‡ ä¹å½±å“ç€æˆ‘ä»¬æ‰€æœ‰çš„é€‰æ‹©ã€‚`,
        `ä½ ä»¥ä¸ºè‡ªå·±æ˜¯åœ¨å¤„ç†å½“ä¸‹çš„äº‹æƒ…ï¼Œä½†æƒ…ç»ªçš„æºå¤´ï¼Œå¾ˆå¤šéƒ½å’Œã€Œ${keyword}ã€ç¼ åœ¨ä¸€èµ·ã€‚`
      ];

      const storyBlocks = [
        `\n\nğŸ” æˆ‘åœ¨å’¨è¯¢ä¸­é‡åˆ°è¿‡ä¸€ä¸ªæ¥è®¿è€…ã€‚\nå¥¹ç‰¹åˆ«æ€•æ‹’ç»äººï¼Œå“ªæ€•å·²ç»å¾ˆç´¯äº†ï¼Œè¿˜æ˜¯ä¼šä¹ æƒ¯æ€§åœ°è¯´ã€Œæ²¡äº‹ï¼Œæˆ‘å¯ä»¥ã€ã€‚\n\nåæ¥æˆ‘ä»¬ä¸€ç‚¹ç‚¹å¾€å›æ¢³ç†ï¼Œæ‰å‘ç°ï¼š\nå¥¹ä»å°åœ¨ä¸€ä¸ªã€Œæƒ…ç»ªä¸ç¨³å®šã€çš„ç¯å¢ƒé‡Œé•¿å¤§ï¼Œä¸ºäº†ä¸è¢«è´£æ€ªï¼Œå¥¹å­¦ä¼šäº†ï¼šå…ˆæ»¡è¶³åˆ«äººï¼Œæ‰æ˜¯ã€Œå®‰å…¨ã€çš„ã€‚`,
        `\n\næœ‰ä¸€æ¬¡å¥¹è·Ÿæˆ‘è¯´ï¼š\nã€Œè€å¸ˆï¼Œæˆ‘çŸ¥é“è¿™æ ·ä¸å¥½ï¼Œå¯æ˜¯æ¯æ¬¡æˆ‘è¦å¼€å£è¯´â€˜ä¸â€™çš„æ—¶å€™ï¼Œå¿ƒé‡Œå°±æ¶Œä¸Šä¸€è‚¡å¼ºçƒˆçš„æ„§ç–šæ„Ÿã€‚ã€\n\né‚£ä¸€åˆ»æˆ‘ç‰¹åˆ«å¿ƒç–¼å¥¹ã€‚\nå› ä¸ºå¥¹ä¸æ˜¯ä¸ä¼šè¡¨è¾¾è¾¹ç•Œï¼Œè€Œæ˜¯å¥¹ä»æ¥æ²¡è¢«å…è®¸æ‹¥æœ‰è‡ªå·±çš„æ„Ÿå—ã€‚`,
        `\n\nå½“æˆ‘ä»¬æŠŠè¿™äº›æ¨¡å¼æ”¾åˆ°ã€Œ${keyword}ã€è¿™ä¸ªæ¡†æ¶é‡Œçœ‹æ—¶ï¼Œå°±ä¼šå‘ç°ï¼š\nå¥¹ç°åœ¨çš„å¾ˆå¤šé€‰æ‹©ï¼Œå¹¶ä¸æ˜¯ã€Œå–œæ¬¢ã€æˆ–ã€Œä¸å–œæ¬¢ã€ï¼Œè€Œæ˜¯ã€Œå®³æ€•å†æ¬¡å—ä¼¤ã€ã€‚`
      ];

      const practicalBlocks = [
        `\n\nğŸ“ å¦‚æœä½ ä¹Ÿåœ¨ç»å†ç±»ä¼¼çš„å›°æ‰°ï¼Œå¯ä»¥å…ˆä»è¿™3ä¸ªå°æ­¥éª¤å¼€å§‹ï¼š\n\n1ï¼‰æŠŠè§¦å‘ä½ æƒ…ç»ªçš„åœºæ™¯è®°å½•ä¸‹æ¥\nä¸éœ€è¦å†™å¾—å¾ˆå®Œç¾ï¼Œåªè¦ç®€å•å†™ä¸‹ã€Œæ—¶é—´â€”äº‹ä»¶â€”å½“ä¸‹çš„æ„Ÿå—å’Œæƒ³æ³•ã€ã€‚\n\n2ï¼‰é—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼šè¿™ä¸ªååº”ï¼Œæ˜¯ç°åœ¨çš„æˆ‘ï¼Œè¿˜æ˜¯è¿‡å»çš„æˆ‘ï¼Ÿ\nå¾ˆå¤šæ—¶å€™ï¼Œä½ ä¼šæƒŠè®¶åœ°å‘ç°ï¼šä½ æ˜¯åœ¨ç”¨å°æ—¶å€™çš„æ–¹å¼ä¿æŠ¤è‡ªå·±ã€‚\n\n3ï¼‰å°è¯•ç»™è‡ªå·±ä¸€ä¸ªæ–°çš„å›åº”è„šæœ¬\næ¯”å¦‚æŠŠã€Œç®—äº†ï¼Œæ²¡å…³ç³»ã€æ¢æˆã€Œæˆ‘æœ‰ç‚¹åœ¨æ„è¿™ä»¶äº‹ï¼Œæˆ‘æƒ³è®¤çœŸè¯´ä¸€ä¸‹æˆ‘çš„æƒ³æ³•ã€ã€‚`,
        `\n\nğŸ“Œ å…³äºã€Œ${keyword}ã€ï¼Œå¯ä»¥è¯•ç€åšä¸€ä¸ªå°ç»ƒä¹ ï¼š\n\n- å†™ä¸‹3ä¸ªä½ å°è±¡æ·±åˆ»çš„åœºæ™¯ï¼šä»€ä¹ˆæ—¶å€™ä½ æœ€å®¹æ˜“è¢«è§¦å‘ï¼Ÿ\n- åœ¨æ¯ä¸ªåœºæ™¯åé¢ï¼ŒåŠ ä¸Šä¸€å¥ï¼šå½“æ—¶æˆ‘æœ€éœ€è¦çš„å…¶å®æ˜¯ä»€ä¹ˆï¼Ÿ\n- ç„¶åé—®é—®ç°åœ¨çš„è‡ªå·±ï¼šæˆ‘æœ‰æ²¡æœ‰å¯èƒ½ï¼Œå…ˆå­¦ä¼šç»™è‡ªå·±è¿™ä¸€éƒ¨åˆ†ï¼Ÿ\n\nå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¸æ˜¯ä¸çŸ¥é“æ€ä¹ˆåšï¼Œè€Œæ˜¯ä¹ æƒ¯äº†å¿½ç•¥è‡ªå·±çš„éœ€æ±‚ã€‚`,
        `\n\nğŸ›  ä½ å¯ä»¥è¯•ç€ç”¨ã€Œä¸‰å¥è‡ªæˆ‘å¯¹è¯ã€æ¥æ…¢æ…¢ä¿®å¤ï¼š\n\nç¬¬1å¥ï¼šæˆ‘çœ‹è§äº†â€”â€”å¦‚å®è¯´å‡ºæ­¤åˆ»çš„æ„Ÿå—\nç¬¬2å¥ï¼šæˆ‘ç†è§£â€”â€”æ‰¿è®¤è¿™ä»½æ„Ÿå—èƒŒåçš„åˆç†æ€§\nç¬¬3å¥ï¼šæˆ‘é€‰æ‹©â€”â€”å‘Šè¯‰è‡ªå·±æ¥ä¸‹æ¥æƒ³è¦åšçš„äº‹\n\nå½“ä½ å¼€å§‹è¿™æ ·å¯¹è‡ªå·±è¯´è¯æ—¶ï¼Œã€Œ${keyword}ã€ä¹Ÿä¼šä¸€ç‚¹ç‚¹å˜å¾—ä¸ä¸€æ ·ã€‚`
      ];

      const emotionalBlocks = [
        `\n\nå¾ˆå¤šäººä¼šå› ä¸ºè¿™äº›æ¨¡å¼ï¼Œå¼€å§‹è®¨åŒç°åœ¨çš„è‡ªå·±ã€‚\nä½†å…¶å®ï¼Œé‚£äº›ã€Œçœ‹èµ·æ¥å¾ˆæ‹§å·´çš„ååº”ã€ï¼Œéƒ½æ˜¯ä½ åœ¨é‚£ä¸ªå¹´çºªï¼Œèƒ½æƒ³åˆ°çš„æœ€å¥½çš„ä¿æŠ¤æ–¹å¼ã€‚\n\nä½ å¯ä»¥ä¸ç”¨æ€¥ç€æ”¹å˜è‡ªå·±ï¼Œå…ˆå­¦ä¼šå¯¹é‚£æ—¶å€™çš„è‡ªå·±è¯´ä¸€å¥ï¼š\nã€Œè°¢è°¢ä½ ï¼Œé‚£æ—¶å€™é‚£ä¹ˆå°ï¼Œå´ä¸€ä¸ªäººæ’‘è¿‡æ¥äº†ã€‚ã€`,
        `\n\nå¿ƒç†å­¦é‡Œæœ‰å¥è¯æˆ‘å¾ˆå–œæ¬¢ï¼š\nã€Œäººç”ŸçœŸæ­£çš„æˆé•¿ï¼Œæ˜¯ä»ä¸å†è´£æ€ªè‡ªå·±å¼€å§‹çš„ã€‚ã€\n\nå½“ä½ æ„¿æ„æ¸©æŸ”åœ°çœ‹è§è‡ªå·±çš„ã€Œ${keyword}ã€ï¼Œä½ å°±å·²ç»åœ¨èµ°å‡ºæ—§æ¨¡å¼äº†ã€‚`,
        `\n\nä½ ä¸éœ€è¦å®Œå…¨ã€Œè§£å†³ã€æ‰€æœ‰çš„ã€Œ${keyword}ã€æ‰é…æ‹¥æœ‰å¹¸ç¦ã€‚\nä½ åªéœ€è¦åœ¨æ¯ä¸€æ¬¡æƒ³è¦é‡è¹ˆè¦†è¾™çš„æ—¶å€™ï¼Œå“ªæ€•å¤šåœåŠç§’ï¼Œé—®é—®è‡ªå·±ï¼š\nã€Œè¿™ä¸€æ¬¡ï¼Œæˆ‘æœ‰æ²¡æœ‰å¯èƒ½ï¼Œä¸ºè‡ªå·±åšä¸€ä¸ªä¸ä¸€æ ·çš„é€‰æ‹©ï¼Ÿã€`
      ];

      const closingBlocks = [
        `\n\nå¦‚æœä½ ä¹Ÿæ­£åœ¨ç»å†ç±»ä¼¼çš„é˜¶æ®µï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºç•™ä¸€å¥ã€Œæˆ‘æ‡‚ã€ï¼Œ\nè®©å½¼æ­¤çŸ¥é“ï¼šä½ ä¸æ˜¯ä¸€ä¸ªäººåœ¨å’Œã€Œ${keyword}ã€å¯¹æŠ—ã€‚`,
        `\n\nå¦‚æœä½ çœ‹åˆ°è¿™é‡Œï¼Œè¯´æ˜ä½ å·²ç»åœ¨è®¤çœŸé¢å¯¹è‡ªå·±çš„ã€Œ${keyword}ã€äº†ã€‚\nè¿™æœ¬èº«ï¼Œå°±æ˜¯ä¸€ä»¶å¾ˆå€¼å¾—è¢«çœ‹è§å’Œè¢«é¼“åŠ±çš„äº‹æƒ…ã€‚`,
        `\n\nä¹Ÿè®¸æ”¹å˜ä¸ä¼šä¸€ä¸‹å­å‘ç”Ÿï¼Œä½†åªè¦ä½ å¼€å§‹æ„è¯†åˆ°ï¼š\nã€ŒåŸæ¥æˆ‘å¯ä»¥ä¸å†è¢«ã€${keyword}ã€ç‰µç€èµ°ã€ï¼Œ\né‚£æ¡æ–°çš„è·¯ï¼Œå…¶å®å·²ç»æ‚„æ‚„å‡ºç°äº†ã€‚`
      ];

      let parts = [];

      parts.push(randomPick(openers).replace(/ã€Œ${keyword}ã€/g, `ã€Œ${keyword}ã€`));

      if (style === 'story' || style === 'mix') {
        parts.push(randomPick(storyBlocks));
      }

      if (style === 'practical' || style === 'mix') {
        parts.push(randomPick(practicalBlocks));
      }

      if (style === 'emotional' || style === 'mix') {
        parts.push(randomPick(emotionalBlocks));
      }

      parts.push(randomPick(closingBlocks));

      return parts.join('');
    }

    function buildTags(keyword) {
      const baseTags = [
        `#${keyword}`,
        '#å¿ƒç†å­¦',
        '#æƒ…ç»ªç–—æ„ˆ',
        '#æˆå¹´äººçš„å´©æºƒ',
        '#è‡ªæˆ‘æˆé•¿'
      ];

      const extraPools = [
        ['#äº²å¯†å…³ç³»', '#çˆ±è‡ªå·±', '#å‘å†…æ¢ç´¢'],
        ['#åŸç”Ÿå®¶åº­è®®é¢˜', '#å’¨è¯¢å¸ˆè§†è§’', '#æˆé•¿å‹æ€ç»´'],
        ['#æƒ…ç»ªç¨³å®šç»ƒä¹ ', '#ä¸è®¨å¥½çš„äººç”Ÿ', '#é«˜æ•æ„Ÿäººæ ¼'],
        ['#å†…è€—å‹äººæ ¼', '#è‡ªæˆ‘ä»·å€¼æ„Ÿ', '#ç–—æ„ˆä¹‹è·¯'],
        ['#è¾¹ç•Œæ„Ÿ', '#å­¦ä¼šè¯´ä¸', '#ä¸å†å§”å±ˆè‡ªå·±']
      ];

      const extras = randomPick(extraPools);
      return [...new Set([...baseTags, ...extras])].slice(0, 6);
    }

    function generatePosts() {
      const rawKeyword = keywordInput.value.trim();
      if (!rawKeyword) {
        keywordInput.focus();
        showToast('å…ˆè¾“å…¥ä¸€ä¸ªå¿ƒç†å­¦å…³é”®è¯å“¦');
        return;
      }

      const keyword = rawKeyword.replace(/[#\s]/g, '');
      const count = parseInt(countSelect.value, 10) || 5;
      const style = getSelectedStyle();

      generateBtn.disabled = true;
      generateBtn.textContent = 'ç”Ÿæˆä¸­...';

      setTimeout(() => {
        const posts = [];
        for (let i = 0; i < count; i++) {
          const localStyle = style === 'mix'
            ? randomPick(['mix', 'story', 'practical', 'emotional'])
            : style;

          const title = buildTitle(keyword, localStyle);
          const body = buildBody(keyword, localStyle);
          const tags = buildTags(keyword);

          posts.push({ title, body, tags, style: localStyle });
        }

        renderPosts(posts, keyword);
        generateBtn.disabled = false;
        generateBtn.textContent = 'ç”Ÿæˆæ–‡æ¡ˆ';
      }, 260);
    }

    function renderPosts(posts, keyword) {
      postsList.innerHTML = '';

      posts.forEach((post, index) => {
        const card = document.createElement('article');
        card.className = 'post-card';

        const indexBadge = document.createElement('div');
        indexBadge.className = 'post-index';
        indexBadge.textContent = `NO.${index + 1}`;
        card.appendChild(indexBadge);

        const titleEl = document.createElement('h3');
        titleEl.className = 'post-title';
        titleEl.textContent = post.title;
        card.appendChild(titleEl);

        const bodyEl = document.createElement('div');
        bodyEl.className = 'post-body';
        bodyEl.textContent = post.body;
        card.appendChild(bodyEl);

        const tagsWrap = document.createElement('div');
        tagsWrap.className = 'post-tags';
        post.tags.forEach(t => {
          const tagEl = document.createElement('span');
          tagEl.className = 'tag';
          tagEl.textContent = t;
          tagsWrap.appendChild(tagEl);
        });
        card.appendChild(tagsWrap);

        const footer = document.createElement('div');
        footer.className = 'post-footer';

        const meta = document.createElement('span');
        meta.textContent = {
          story: 'æ•…äº‹å‘ Â· å…±é¸£æ„Ÿå¼º',
          practical: 'å·¥å…·å‘ Â· å¹²è´§ä¸ºä¸»',
          emotional: 'æƒ…ç»ªå‘ Â· å…±æƒ…ç–—æ„ˆ',
          mix: 'ç»¼åˆå‘ Â· å¤šç»´åº¦å±•å¼€'
        }[post.style] || 'ç»¼åˆå‘ Â· å¤šç»´åº¦å±•å¼€';

        const copyBtn = document.createElement('button');
        copyBtn.className = 'copy-btn';
        copyBtn.textContent = 'å¤åˆ¶è¿™æ¡';
        copyBtn.addEventListener('click', () => {
          const full = `ã€æ ‡é¢˜ã€‘\n${post.title}\n\nã€æ­£æ–‡ã€‘\n${post.body}\n\nã€è¯é¢˜æ ‡ç­¾ã€‘\n${post.tags.join(' ')}`;
          navigator.clipboard.writeText(full).then(() => {
            showToast('å½“å‰æ–‡æ¡ˆå·²å¤åˆ¶ï¼Œå¯ä»¥ç›´æ¥ç²˜è´´åˆ°å°çº¢ä¹¦ï½');
          });
        });

        footer.appendChild(meta);
        footer.appendChild(copyBtn);
        card.appendChild(footer);

        postsList.appendChild(card);
      });

      resultsMeta.innerHTML = `å·²æ ¹æ® <strong>ã€Œ${keyword}ã€</strong> ç”Ÿæˆ <strong>${posts.length}</strong> æ¡å¯ç›´æ¥ä½¿ç”¨çš„å°çº¢ä¹¦æ–‡æ¡ˆï¼Œå¯æŒ‰éœ€äºŒæ¬¡ä¿®æ”¹ã€‚`;
    }

    if (keywordChips) {
      keywordChips.addEventListener('click', (e) => {
        const chip = e.target.closest('.chip');
        if (!chip) return;
        keywordInput.value = chip.textContent.trim();
        keywordInput.focus();
      });
    }

    if (styleChips) {
      styleChips.addEventListener('click', (e) => {
        const chip = e.target.closest('.chip');
        if (!chip) return;
        styleChips.querySelectorAll('.chip').forEach(c => c.classList.remove('primary'));
        chip.classList.add('primary');
      });
    }

    generateBtn.addEventListener('click', generatePosts);

    keywordInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        generatePosts();
      }
    });

    countSelect.addEventListener('change', () => {
      countLabel.textContent = countSelect.value;
    });

    copyAllBtn.addEventListener('click', () => {
      const cards = postsList.querySelectorAll('.post-card');
      if (!cards.length) {
        showToast('è¿˜æ²¡æœ‰å†…å®¹å¯å¤åˆ¶ï¼Œå…ˆç”Ÿæˆä¸€æ‰¹æ–‡æ¡ˆå§');
        return;
      }

      const blocks = [];
      cards.forEach((card, index) => {
        const title = card.querySelector('.post-title')?.textContent || '';
        const body = card.querySelector('.post-body')?.textContent || '';
        const tags = Array.from(card.querySelectorAll('.tag')).map(t => t.textContent).join(' ');

        blocks.push(
          `ç¬¬${index + 1}æ¡\n\nã€æ ‡é¢˜ã€‘\n${title}\n\nã€æ­£æ–‡ã€‘\n${body}\n\nã€è¯é¢˜æ ‡ç­¾ã€‘\n${tags}`
        );
      });

      const text = blocks.join('\n\n------------------------\n\n');

      navigator.clipboard.writeText(text).then(() => {
        showToast('æœ¬é¡µæ‰€æœ‰æ–‡æ¡ˆå·²å¤åˆ¶ï¼Œå»å°çº¢ä¹¦æ’ç‰ˆå°±è¡Œå•¦');
      });
    });
  </script>
</body>
</html>

